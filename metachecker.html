<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Meta-Checker | SEO Experte Aachen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Meta-Checker Tool â€“ ÃœberprÃ¼fen Sie Meta-Tags, SEO-Daten und Social Previews von Webseiten.">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #2563eb;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      animation: spin 0.8s linear infinite;
      display: inline-block;
    }
    @keyframes spin { 0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);} }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">
  <!-- Header -->
  <header class="bg-white shadow sticky top-0 z-50">
    <div class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center">
      <a href="index.html" class="text-2xl font-bold text-blue-600">SEO Experte Aachen</a>
      <a href="index.html" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 transition">â¬…ï¸ ZurÃ¼ck</a>
    </div>
  </header>

  <!-- Main -->
  <main class="max-w-5xl mx-auto py-12 px-6">
    <h1 class="text-3xl sm:text-4xl font-bold mb-6 text-center">ğŸ” Meta-Checker Tool</h1>
    <p class="text-center mb-8">ÃœberprÃ¼fen Sie SEO-Daten, Meta-Tags, H-Struktur und Social Previews einer Webseite.</p>

    <!-- Formular -->
    <form id="checker-form" class="flex flex-col sm:flex-row gap-3 mb-8">
      <input type="url" id="url" placeholder="https://example.com"
        class="flex-1 border rounded-lg px-4 py-3 shadow-sm text-base focus:outline-none focus:ring-2 focus:ring-blue-600"
        required>
      <button type="submit" id="checkBtn"
        class="flex items-center justify-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg shadow hover:bg-blue-700 transition disabled:opacity-70 disabled:cursor-not-allowed">
        <span id="btnText">ğŸš€ PrÃ¼fen</span>
      </button>
    </form>

    <div id="results" class="space-y-10"></div>
  </main>

  <!-- Ladeoverlay -->
  <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden z-50">
    <div id="overlayContent" class="bg-white rounded-lg shadow-lg p-6 flex flex-col items-center w-80">
      <div class="spinner mb-3"></div>
      <p class="text-gray-700 font-semibold mb-4">Wird geladenâ€¦</p>
      <div class="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
        <div id="progressBar" class="bg-blue-600 h-2 w-0"></div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-6 mt-16">
    <div class="max-w-6xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
      <p>Â© 2025 SEO Experte Aachen â€“ Alle Rechte vorbehalten.</p>
      <div class="space-x-4">
        <a href="impressum.html" class="hover:underline">Impressum</a>
        <a href="datenschutz.html" class="hover:underline">DatenschutzerklÃ¤rung</a>
      </div>
    </div>
  </footer>

  <script>
    function checkLength(text, min, max) {
      if (!text) return 'âŒ fehlt';
      if (text.length < min) return `âš ï¸ zu kurz (${text.length})`;
      if (text.length > max) return `âš ï¸ zu lang (${text.length})`;
      return `âœ… ok (${text.length})`;
    }

    function calculateSeoScore(d) {
      let score = 0, max = 10;
      if (d.title && d.title.length >= 10 && d.title.length <= 60) score++;
      if (d.description && d.description.length >= 50 && d.description.length <= 160) score++;
      if (d.ogImage) score++;
      if (d.twitterImage) score++;
      if (d.canonical) score++;
      if (d.robots) score++;
      if (d.author) score++;
      if (d.headings.h1.length === 1) score++;
      if (d.headings.h2.length >= 2) score++;
      if (d.bold.length >= 3 && d.bold.length <= 15) score++;
      return Math.round((score / max) * 100);
    }

    async function animateProgress() {
      const bar = document.getElementById("progressBar");
      bar.style.width = "0%";
      let w = 0;
      return setInterval(() => {
        w += Math.random() * 15;
        if (w >= 95) w = 95;
        bar.style.width = w + "%";
      }, 300);
    }

    document.getElementById("checker-form").addEventListener("submit", async (e) => {
      e.preventDefault();
      const btn = document.getElementById("checkBtn");
      const btnText = document.getElementById("btnText");
      const overlay = document.getElementById("loadingOverlay");
      const url = document.getElementById("url").value;

      btn.disabled = true; btnText.textContent = "PrÃ¼fen...";
      overlay.classList.remove("hidden");
      let progressInterval = await animateProgress();

      try {
        const res = await fetch("https://api.allorigins.win/get?url=" + encodeURIComponent(url));
        const data = await res.json();
        const html = data.contents;
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, "text/html");

        const d = {
          title: doc.querySelector("title")?.innerText || "",
          description: doc.querySelector("meta[name='description']")?.content || "",
          canonical: doc.querySelector("link[rel='canonical']")?.href || "",
          robots: doc.querySelector("meta[name='robots']")?.content || "",
          author: doc.querySelector("meta[name='author']")?.content || "",
          ogImage: doc.querySelector("meta[property='og:image']")?.content || "",
          twitterImage: doc.querySelector("meta[name='twitter:image']")?.content || "",
          headings: {
            h1: [...doc.querySelectorAll("h1")].map(h => h.innerText),
            h2: [...doc.querySelectorAll("h2")].map(h => h.innerText),
            h3: [...doc.querySelectorAll("h3")].map(h => h.innerText),
          },
          bold: [...doc.querySelectorAll("b,strong")].map(b => b.innerText)
        };

        const score = calculateSeoScore(d);
        const circleRadius = 50;
        const circumference = 2 * Math.PI * circleRadius;
        const offset = circumference - (score / 100) * circumference;

        document.getElementById("results").innerHTML = `
          <div class="bg-white shadow rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4">â­ SEO Score</h2>
            <svg class="w-32 h-32 transform -rotate-90 mx-auto mb-4">
              <circle cx="64" cy="64" r="${circleRadius}" stroke="#e5e7eb" stroke-width="10" fill="none"/>
              <circle cx="64" cy="64" r="${circleRadius}" stroke="${score >= 80 ? '#16a34a' : score >= 50 ? '#facc15' : '#dc2626'}"
                stroke-width="10" fill="none"
                stroke-dasharray="${circumference}"
                stroke-dashoffset="${offset}"
                stroke-linecap="round"/>
            </svg>
            <p class="text-center text-xl font-bold">${score} / 100</p>
          </div>

          <div class="bg-gray-50 border rounded-lg p-4">
            <h3 class="font-semibold mb-2">ğŸ“‹ Gefundene Elemente</h3>
            <p><b>Titel:</b> ${d.title} (${checkLength(d.title, 10, 60)})</p>
            <p><b>Description:</b> ${d.description} (${checkLength(d.description, 50, 160)})</p>
            <p><b>H1:</b> ${d.headings.h1.join(", ") || "âŒ keine"}</p>
            <p><b>H2:</b> ${d.headings.h2.join(", ") || "âŒ keine"}</p>
            <p><b>Fette WÃ¶rter:</b> ${d.bold.length}</p>
          </div>

          <div class="bg-gray-50 border rounded-lg p-4">
            <h3 class="font-semibold mb-2">ğŸ“‘ Meta-Tags</h3>
            <pre class="bg-white p-4 rounded text-sm overflow-x-auto">&lt;title&gt;${d.title}&lt;/title&gt;
&lt;meta name="description" content="${d.description}"&gt;
&lt;link rel="canonical" href="${d.canonical}"&gt;
&lt;meta name="robots" content="${d.robots}"&gt;
&lt;meta name="author" content="${d.author}"&gt;
&lt;meta property="og:image" content="${d.ogImage}"&gt;
&lt;meta name="twitter:image" content="${d.twitterImage}"&gt;</pre>
          </div>
        `;

        setTimeout(() => overlay.classList.add("hidden"), 500);
      } catch (err) {
        document.getElementById("results").innerHTML = `<p class="text-red-600 font-bold">âŒ Fehler: ${err.message}</p>`;
        overlay.classList.add("hidden");
      } finally {
        btn.disabled = false;
        btnText.textContent = "ğŸš€ PrÃ¼fen";
        if (progressInterval) clearInterval(progressInterval);
      }
    });
  </script>
</body>
</html>
